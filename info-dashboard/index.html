<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="css/style.min.css" type="text/css" rel="stylesheet">
    <link rel="preload" href="fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin> 
    <title>Info DM</title>
</head>

<body>
    <div class="wrap">
        <!--header-->
        <header class="header">
          <div class="container">
            <h1>Нижне-Печёрская 12</h1>
            <div class="date">
              <div class="date__top">
                <span class="date__hours"></span>
                <span class="date__dot">:</span>
                <span class="date__min"></span>
              </div>
              <div class="date__bottom">
                 <span class="date__date"></span>
                 <span class="date__month"></span>, <span class="date__day"></span>
              </div>   
            </div>
          </div>
        </header>
        <!--main-->  
        <main class="main">
            <section class="page">
                <div class="page__inner">
                    <h5>Коротко о важном из чата дома:</h5>
                    <div class="item-blocks">
                        <div class="item-block pinned">
                          <p>Ожидается уборка снега, просьба убрать машины!</p>
                          <span class="time">12.10.2023</span>
                        </div>
                        <div class="item-block">
                          <p>Ожидается уборка снега, просьба убрать машины! 12.10.2023 ожидается уборка снега, просьба убрать машины!</p>
                          <span class="time">12.10.2023</span>
                        </div>
                        <div class="item-block">
                          <p>Ожидается уборка снега, просьба убрать машины! 12.10.2023 ожидается уборка снега, просьба убрать машины!</p>
                          <span class="time">12.10.2023</span>
                        </div>
                        <div class="item-block">
                          <p>Ожидается уборка снега, просьба убрать машины! 12.10.2023 ожидается уборка снега, просьба убрать машины!</p>
                          <span class="time">12.10.2023</span>
                        </div>
                    </div>
                </div>
                <div class="page__bottom">
                  <div class="container">
                    <div class="subscribe">
                      <p>Подписаться на важные уведомления по дому можно на сайте:</p>
                      <span>infodm.ru</span>
                    </div>
                    <div class="video-cols">
                      <!-- <div class="video-cols__col">
                        <input type="hidden" name="webrtc-url" class="webrtc-url" value="https://rtsp.infodm.ru/stream/27aec28e-6181-4753-9acd-0456a75f0289/channel/0/webrtc">
                        <video class="webrtc-video" autoplay="" muted="" playsinline="" controls="" style="max-height: 100%;"></video>
                      </div>
                      <div class="video-cols__col">
                        <input type="hidden" name="mse-url" class="mse-url" value="wss://rtsp.infodm.ru/stream/3c16f57a-416b-4a57-89d6-f57c7dc44975/channel/0/mse?uuid=3c16f57a-416b-4a57-89d6-f57c7dc44975&channel=0">
                        <video class="mse-video" autoplay="" muted="" playsinline="" controls="" style="max-height: 100%;"></video>
                      </div>
                      <div class="video-cols__col">
                        <input type="hidden" name="mse-url" class="mse-url" value="wss://rtsp.infodm.ru/stream/3c16f57a-416b-4a57-89d6-f57c7dc44975/channel/0/mse?uuid=3c16f57a-416b-4a57-89d6-f57c7dc44975&channel=0">
                        <video class="mse-video" autoplay="" muted="" playsinline="" controls="" style="max-height: 100%;"></video>
                      </div> -->
                    </div>
                    <div class="swiper mainswiper">
                      <div class="swiper-wrapper">
                        <div class="swiper-slide mainswiper__item">
                          <div class="mainswiper__left">
                            <div class="mainswiper__preview"><picture><source srcset="img/bell.webp" type="image/webp"><img src="img/bell.jpg" alt=""></picture></div>                          
                          </div>
                          <div class="mainswiper__right">
                            <p><b>Жителям 17 этажа</b> просьба<br>спустить воду из системы<br>отопления.</p>
                          </div>
                        </div>
                        <div class="swiper-slide mainswiper__item">
                          <div class="mainswiper__left">
                            <div class="mainswiper__preview"><picture><source srcset="img/qr-code.webp" type="image/webp"><img src="img/qr-code.png" alt=""></picture></div>                          
                          </div>
                          <div class="mainswiper__right">
                            <p>Заходите в чат нашего<br>дома <b>в телеграмме</b></p>
                          </div>
                        </div>
                        <div class="swiper-slide mainswiper__item">
                          <div class="mainswiper__left">
                            <span>Соблюдайте<br>тишину!</span>
                            <div class="mainswiper__preview"><picture><source srcset="img/muted.webp" type="image/webp"><img src="img/muted.png"  alt=""></picture></div>                          
                          </div>
                          <div class="mainswiper__right">
                            <div class="mainswiper__cols">
                              <div class="mainswiper__col">
                                <span>В рабочие дни</span>
                                <span>С 22 до 7</span>  
                              </div>
                              <div class="mainswiper__col">
                                <span>В выходные дни</span>
                                <span>С 23 до 10</span>  
                              </div>
                              <div class="mainswiper__col">
                                <span>В любой день</span>
                                <span>С 12:30 до 15</span>  
                              </div>
                              <div class="mainswiper__col">
                                <span>Ремонтные работы</span>
                                <span>СТРОГО до 20:00</span>  
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="swiper-pagination"></div>
                    </div>
                  </div>
                </div>
            </section>
        </main>
        <!--footer-->
        <footer></footer>
    </div>
    <script src="js/libs/jquery.min.js"></script>
    <script src="js/libs/swiper.min.js"></script>
    <script src="js/libs/video-rtc.js"></script>
    <script src="js/main.js"></script>
    <script type="module">
      let url = "https://rtsp.infodm.ru/stream.html?src=entry&src=main-door&mode=webrtc"
      let searchIdx = url.indexOf("?")
      console.log(url.slice(0,searchIdx))
      const params = new URLSearchParams(url.slice(searchIdx));
      // support multiple streams and multiple modes
      const streams = params.getAll('src');
      const modes = params.getAll('mode');
      console.log(location.search)
      if (modes.length === 0) modes.push('');
  
      while (modes.length > streams.length) {
          streams.push(streams[0]);
      }
      while (streams.length > modes.length) {
          modes.push(modes[0]);
      }
  
      if (streams.length > 1) {
          document.body.className = 'flex';
      }
  
      const background = params.get('background') !== 'false';
      const width = '1 0 ' + (params.get('width') || '320px');
  
      for (let i = 0; i < streams.length; i++) {
          const video = document.createElement('video-stream');
          video.background = background;
          video.mode = modes[i] || video.mode;
          video.style.flex = width;
          video.src = new URL('api/ws?src=' + encodeURIComponent(streams[i]), url.slice(0,searchIdx));
          document.querySelector(".video-cols").appendChild(video);
      }
  </script>
</body>

</html>